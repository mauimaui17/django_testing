{%extends 'test/base.html'%}

{%block content%}
<div class="container">
    <!-- Display All Students -->
    {% if has_students%}
        <h1> Students </h1>
        <button class="btn btn-primary mb-3"> Add Student</button>
        <table id="students"class="table table-striped table-bordered " style="table-layout: fixed;" cellspacing="0" cellpadding="0" width="100%">
            <thead>
                <tr>
                    <th class="text-center" rowspan="2"> Name </th>
                    <!-- <th class="text-center" rowspan="2"> First Name</th> -->
                    <th class="text-center" rowspan="2"> Student ID </th>
                    <th class="text-center" rowspan="2"> Grade Level </th>
                    <th class="text-center" colspan="2"> Violations </th>
                </tr>
                <tr>
                    <th class="text-center"> Minor </th>
                    <th class="text-center"> Major </th>
                </tr>
            </thead>
            <tbody>
                {%for student in student_list%}
                    <tr data-id ="{{ student.id }}">
                        <td class="text-center"> {{student.last_name}}, {{student.first_name}}</td>
                        <td class="text-center"> {{student.student_id}}</td>
                        <td class="text-center"> {{student.get_grade_level_display}}</td>
                        <td class="text-center">
                            {{student.get_minor_count|default:"No minor violations."}}
                        </td>
                        <td class="text-center">
                            {{student.get_major_count|default:"No major violations."}}
                        </td>
                    </tr>
                {%endfor%}
            </tbody>
        </table>
    {%else%}
        <h1 class="center"> No Students To Display</h1>
    {%endif%}j
</div>
<script>
    $(document).ready(function() {
        $('#students').DataTable({
            responsive: true,
            paging: true,
            searching: true,
            ordering: true
        });
    });
</script>
{%endblock%}